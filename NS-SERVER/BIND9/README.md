---

# ๐ BIND9 DNS-ัะตัะฒะตั ะดะปั HappyLink



* `146.120.101.0/24`
* `193.176.2.0/24`

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
bind9/
 โโโ docker-compose.yml      # ะทะฐะฟััะบ ะบะพะฝัะตะนะฝะตัะฐ BIND9
 โโโ named.conf              # ะพัะฝะพะฒะฝะพะน ะบะพะฝัะธะณ BIND9
 โโโ zones/                  # DNS-ะทะพะฝั
 โ    โโโ db.happylink.com
 โ    โโโ db.101.120.146.in-addr.arpa
 โ    โโโ db.2.176.193.in-addr.arpa
 โโโ scripts/
      โโโ gen_ptr.py         # ะณะตะฝะตัะฐัะพั PTR-ะทะฐะฟะธัะตะน
```

---

## ๐ง ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ

1. ะะปะพะฝะธัะพะฒะฐัั ัะตะฟะพะทะธัะพัะธะน:

   ```bash
   git clone https://github.com/<yourname>/happylink-dns.git
   cd happylink-dns/bind9
   ```

2. ะะฐะฟัััะธัั ะบะพะฝัะตะนะฝะตั:

   ```bash
   docker-compose up -d
   ```

3. ะัะพะฒะตัะธัั ัะฐะฑะพัั:

   ```bash
   dig @127.0.0.1 ns1.happylink.net.ua
   dig @127.0.0.1 -x 145.100.222.10
   ```

---

## โ๏ธ ะะพะฝัะธะณััะฐัะธั

### ะัะฝะพะฒะฝะพะน ะบะพะฝัะธะณ: `named.conf`

* ะัะบะปััะตะฝะฐ ัะตะบัััะธั (ัะตัะฒะตั **ัะพะปัะบะพ ะฐะฒัะพัะธัะฐัะธะฒะฝัะน**).
* ะะฐัััะพะตะฝั ััะธ ะทะพะฝั:

  * `happylink.net.ua`
  * `101.120.146.in-addr.arpa`
  * `2.176.193.in-addr.arpa`

### ะััะผะฐั ะทะพะฝะฐ: `db.happylink.com`

ะกะพะดะตัะถะธั:

* NS-ะทะฐะฟะธัะธ (`ns`, `ns1`)
* A-ะทะฐะฟะธัะธ ะดะปั `www`, `mail`, `api`
* MX-ะทะฐะฟะธัั ะดะปั ะฟะพััั

### ะะตะฒะตัั-ะทะพะฝั

* `db.101.120.146.in-addr.arpa` โ PTR ะดะปั `ns`, `www`, `mail`
* `db.2.176.193.in-addr.arpa` โ PTR ะดะปั `ns1`, `api`

---

## ๐ ะะฒัะพะผะฐัะธัะตัะบะฐั ะณะตะฝะตัะฐัะธั PTR-ะทะพะฝ

ะะปั ัะดะพะฑััะฒะฐ ะตััั Python-ัะบัะธะฟั `scripts/gen_ptr.py`.

ะัะธะผะตั ะณะตะฝะตัะฐัะธะธ:

```bash
cd bind9/scripts

# ะะปั ัะตัะธ 146.120.101.0/24
./gen_ptr.py 146.120.101.0 happylink.net.ua > ../zones/db.101.120.146.in-addr.arpa

# ะะปั ัะตัะธ 148.100.222.0/24
./gen_ptr.py 148.100.222.0 happylink.net.ua > ../zones/db.2.176.193.in-addr.arpa
```

ะะพ ัะผะพะปัะฐะฝะธั ัะบัะธะฟั ัะพะทะดะฐัั PTR-ะทะฐะฟะธัะธ `hostX.happylink.com` ะดะปั ะฒัะตั ะฐะดัะตัะพะฒ ะพั `.1` ะดะพ `.254`.
ะะปั "ะพัะพะฑัั" IP (ะฝะฐะฟัะธะผะตั `ns1`, `www`, `mail`, `api`) ะธะผะตะฝะฐ ะฟัะพะฟะธัะฐะฝั ะฒัััะฝัั ะฒ ัะบัะธะฟัะต.

---

## ๐ ะัะพะฒะตัะบะฐ DNS

```bash
# ะััะผะฐั ะทะฐะฟะธัั
dig @127.0.0.1 www.happylink.net.ua

# PTR-ะทะฐะฟะธัั
dig @127.0.0.1 -x 146.120.101.2
```
